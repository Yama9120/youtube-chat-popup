(()=>{"use strict";const e=new class{constructor(e={}){this.messages=[],this.options={position:e.position||"right",duration:e.duration||5e3,maxMessages:e.maxMessages||5},this.container=this.createContainer()}createContainer(){const e=document.createElement("div");return e.style.cssText=`\n      position: fixed;\n      ${this.options.position}: 20px;\n      top: 20px;\n      z-index: 9999;\n      pointer-events: none;\n    `,document.body.appendChild(e),e}addMessage(e){const t=this.createMessageElement(e);if(this.container.appendChild(t),this.messages.push(e),this.messages.length>this.options.maxMessages){const e=this.messages.shift(),t=this.container.querySelector(`[data-message-id="${e?.id}"]`);t?.remove()}setTimeout((()=>{t.remove(),this.messages=this.messages.filter((t=>t.id!==e.id))}),this.options.duration)}createMessageElement(e){const t=document.createElement("div");return t.dataset.messageId=e.id,t.style.cssText="\n      background: rgba(0, 0, 0, 0.8);\n      color: white;\n      padding: 8px 12px;\n      border-radius: 4px;\n      margin-bottom: 8px;\n      animation: slideIn 0.3s ease-out;\n    ",t.innerHTML=`<strong>${e.author}:</strong> ${e.message}`,t}},t=new class{constructor(e){this.callback=e,this.observer=new MutationObserver(this.handleMutations.bind(this))}start(){const e=document.querySelector("#chat");e?this.observer.observe(e,{childList:!0,subtree:!0}):setTimeout((()=>this.start()),1e3)}stop(){this.observer.disconnect()}handleMutations(e){for(const t of e)"childList"===t.type&&this.processChatMessages(t.addedNodes)}processChatMessages(e){e.forEach((e=>{if(e instanceof HTMLElement&&this.isChatMessage(e)){const t=this.extractMessageData(e);t&&this.callback(t)}}))}isChatMessage(e){return"YT-LIVE-CHAT-TEXT-MESSAGE-RENDERER"===e.tagName||e.matches('[id^="message"]')}extractMessageData(e){try{const t=e.querySelector("#author-name"),s=e.querySelector("#message");return t&&s?{id:crypto.randomUUID(),author:t.textContent?.trim()||"",message:s.textContent?.trim()||"",timestamp:Date.now()}:null}catch(e){return console.error("Error extracting message data:",e),null}}}((t=>{e.addMessage(t)}));document.addEventListener("fullscreenchange",(()=>{document.fullscreenElement?t.start():t.stop()})),window.location.pathname.includes("/watch")&&t.start()})();